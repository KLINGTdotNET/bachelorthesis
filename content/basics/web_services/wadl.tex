\section{WADL}
\label{sec:wadl}

Die \emph{Web Application Description Language} (kurz \gls{WADL}) ist eine maschinenlesbare Beschreibung einer \textsc{Http}-basierten Webanwendung einschließlich einer Menge von \textsc{Xml} Schematas \cite{hadleyWADL}.
Die aktuelle Revision ist vom \citedate{WADLcurrent} \cite{WADLcurrent}. Im weiteren beziehe ich mich aber auf die in der Spreadshirt-\textsc{Api} verwendeten Version, datiert am 9. November 2006. Die Unterschiede zwischen beiden Revisionen können unter \cite{WADLchanges} nachvollzogen werden.

Die Beschreibung eines Webservices durch \textsc{Wadl} besteht nach \cite{hadleyWADL} im groben aus den folgenden vier Bestandteilen:
\begin{description}
     \item[Set of resources] Analog einer Sitemap, also die Übersicht aller verfügbaren Ressourcen
     \item[Relationships between resources] die kausale und referentielle Verknüpfung zwischen Ressourcen
     \item[Methods that can be applied to each resource] die von der jeweiligen Ressource unterstützten [\textsc{Http}]-Methoden, deren Ein- und Ausgabe, sowie die unterstützten Formate
     \item[Resource representation formats] die unterstützten \gls{MIME}-Typen und verwendeten Datenschemata (\cref{sec:xsd})
 \end{description} 

%\begin{minipage}{\textwidth}
\begin{lstlisting}[language=XML, caption={Beispielaufbau einer \textsc{Wadl}-Datei anhand der Spreadshirt-\textsc{Api} Beschreibung}, label=lst:wadlstructure, name=wadlstructure]
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> //@\ding{202}@//
<application xmlns="http://research.sun.com/wadl/2006/10"> //@\ding{203}@//
    <grammars> //@\ding{204}@//
        <include href="http://api.spreadshirt.net/api/v1/metaData/api.xsd">
            <doc>Catalog XML Schema.</doc>
        </include>
        ...
    </grammars>
    <resources base="http://api.spreadshirt.net/api/v1/"> //@\ding{205}@//
        <resource path="users/{userId}"> //@\ding{206}@//
            <doc>Return user data.</doc>
            <method name="GET"> //@\ding{207}@//
                <doc>...</doc>
                <request> //@\ding{208}@//
                    <param 
                        xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                        name="mediaType" 
                        style="query" 
                        type="xsd:string">
                    <doc>...</doc>
                    </param>
                    ...
                </request>
                <response> //@\ding{209}@//
                    <representation 
                        xmlns:sns="http://api.spreadshirt.net"
                        element="sns:user" 
                        status="200" 
                        mediaType="application/xml">
                    <doc title="Success"/>
                    </representation>
                    <fault status="500" mediaType="text/plain">
                        <doc title="Internal Server Error"/>
                    </fault>
                    ...
                    }
                ...
\end{lstlisting}
%\end{minipage}

%% ToDo: verfeinern der Beschreibung, was ist erlaubt, was nicht?
Die Datei beginnt mit der Angabe der \textsc{Xml}-Deklaration \ding{202}.
Die Attribute des Wurzelknotens \texttt{<application>} enthalten \emph{namespace} Definitionen, u. a. auch den der verwendeten \textsc{Wadl}-Spezifikation \ding{203}.
Innerhalb des \texttt{<grammars>} Elements werden die benutzten \textsc{Xml} Schemas angegeben \ding{204}. 
Um die Ressourcen der Webanwendung ansprechen zu können, wird noch die Angabe der Basisadresse benötigt \ding{205}. 
Innerhalb des \texttt{<resources>} Elements findet sich die Beschreibung der einzelnen Ressourcen. Diese sind gekennzeichnet durch eine zur Basisadresse relativen \gls{URI} \ding{206}. In \texttt{\{\ldots\}} eingeschlossene Teile einer \gls{URI} werden durch den Wert des gleichnamigen \emph{request} Parameters ersetzt um die \gls{URI} zu bilden (generative \glspl{URI}).
Im Folgenden werden die von der Ressource unterstützten \textsc{Http}-Methoden beschrieben \ding{207}, deren Anfrageparameter \texttt{<request>} \ding{208} sowie die möglichen Ausgaben der jeweiligen Methode \texttt{<response>} \ding{209}.

Die Dokumentations-Tags \texttt{<doc>} sind für alle \textsc{Xml}-Elemente optional.
Um das Listing nicht unnötig zu verlängern, wurden die schließenden \emph{Tags} weggelassen.

\Cref{fig:wadlstructure} zeigt die Struktur einer \textsc{Wadl}-Datei.

\newpage

\begin{figure}
    \centering
    \resizebox{!}{\textwidth}{
        \input{tikz_pgf/wadlstructure}
    }
    \caption{Struktur einer \textsc{Wadl}-Datei, nach Kapitel 2 \cite{hadleyWADL}}
    \label{fig:wadlstructure}
\end{figure}