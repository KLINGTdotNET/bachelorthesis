\section{Datenmodell}
\label{sec:datamodel}

% todo: Spezifikation oder domänenspezifisches Modell?
Das Datenmodell enthält die Informationen der Spezifikation und dient als Eingabe für den Generator, es ist somit die \emph{Basis der Codegenerierung}. \citeauthor{rfc3198} definieren den Begriff in \cite{rfc3198} folgenderweise\footnote{eigene Übersetzung}:

\thesisDefinition{Datenmodell}{
    Ein Datenmodell ist im Grunde die Darstellung eines Informationsmodells unter Berücksichtigung einer Menge von Mechanismen für die Darstellung, Organisierung, Speicherung und Bearbeitung von Daten.
    Das Modell besteht aus einer Sammlung von \ldots
    \begin{compactitem}
        \item{Datenstrukturen, wie Listen, Tabellen, Relationen etc.}
        \item{Operationen die auf die Strukturen angewendet werden können, wie Abfrage, Aktualisierung, ...}
        \item{Integritätsbedingungen die gültige Zustände (Menge von Werten) odder Zustandsänderungen (Operationen auf Werten) definieren.}
    \end{compactitem}
}

Bei dieser Definition wird der Begriff \emph{Informationsmodell} genutzt, er beschreibt die Informationen die im Datenmodell abgebildet werden sollen ohne Berücksichtigung softwaretechnischer Aspekte. Das Informationsmodell stellt somit die \enquote{natürlichen Daten} dar.

Bei einem Codegenerator entspricht das Datenmodell der internen Darstellung der Spezifikation. Neben den direkt in der Spezifikation enthaltenen Informationen kann der Generator im Analyseschritt (siehe \cref{sec:generator_tasks}) bspw. Datenabhängigkeiten erkennen und diese zur Optimierung nutzen oder das interne Datenmodell damit anreichern. Das \emph{erkennen von Semantik} im Eingabemodell ist aber nicht auf Datenabhängigkeiten beschränkt sondern kann auf beliebige Beziehungen ausgeweitet werden. 

Wie man in \Cref{fig:wadlstructure} erkennen kann, entspricht die Struktur einer WADL-Datei einem Baum. Aus diesem Grund eignet sich eine Baumstruktur für das Datenmodell des Generators besonders gut. Um die Zielsprache (siehe \cref{sec:target_language}) im internen Datenmodell abbilden zu können, wird ein \gls{AST} als Datenstruktur gewählt.

\subsection{Abstract Syntax Tree (AST)}
\label{sec:ast}

Eine anschauliche Definition bietet \cite[][S. 69]{ahoCompiler} (eigene Übersetzung):
\thesisDefinition{Abstract Syntax Tree -- \citeauthor{ahoCompiler}}{
Ein Abstrakter Syntaxbaum ist die Darstellung eines Ausdrucks, wo jeder Knoten einen \emph{Operator} und dessen Kindknoten die \emph{Operanden} repräsentieren.
Im Allgemeinen kann für jedes Programmierkonstrukt ein Operator erzeugt werden, dessen semantisch bedeutsamen Komponenten dann als Operanden gehandhabt werden.
}

%Etwas kürzer definiert \citeauthor{gruneCompiler} den Begriff in \cite[][S. 9 ff.]{gruneCompiler} (eigene Übersetzung):
% \thesisDefinition{Abstract Syntax Tree -- \citeauthor{gruneCompiler}}{ Der abstrakte Syntaxbaum stellt die verschiedenen Teile eines Programmtextes aus Sicht der Grammatik, dar. }

Er ist das Endprodukt eines Parsingschrittes des Quelltextes, im Gegensatz zum \emph{konkreten Syntaxbaum} (auch \emph{Parse Tree}) enthält der \emph{AST} keine Formatierungsspezifische Syntax (bspw. Klammern). 

\begin{figure}[htb]
    \centering
    %\resizebox{\textwidth}{!}{
        \centering
        \begin{tikzpicture}
            \Tree 
                [ .gcd 
                    [ .= 
                        [ .if 
                            [ .== 
                                [ .b ] 
                                [ .0 ]
                            ]
                            [ .a ]
                        ] 
                        [ .else 
                            [ .gcd
                                [ .b ]
                                [ .\% 
                                    [ .a ]
                                    [ .b ]
                                ]
                            ]
                        ]
                    ]
                ]
        \end{tikzpicture}        
    %}
    \caption{Beispiel AST für den rekursiven euklidischen Algorithmus}
    \label{fig:ast}   
\end{figure}

%Ein \emph{AST} bildet auch die Grundstruktur des Datenmodells für den Generator. 
